/* lightrouter.js - Copyright 2014 Gary Green. Licensed under the Apache License, Version 2.0 */!function(t){"undefined"!=typeof exports?module.exports={LightRouter:t()}:window.LightRouter=t(window)}(function(t){function e(t){if(this.pathRoot="",this.routes=[],this.type="path",this.path=null,this.hash=null,t=t||{},t.type&&this.setType(t.type),t.pathRoot&&this.setPathRoot(t.pathRoot),t.path&&this.setPath(t.path),t.hash&&this.setHash(t.hash),t.routes){var e;for(e in t.routes)this.add(e,t.routes[e])}}function o(t){return"string"==typeof t?new RegExp("^"+t.replace(/\//g,"\\/").replace(/:(\w*)/g,"([^\\\\]*)")+"$"):t}return e.prototype.add=function(t,e){return this.routes.push({route:t,callback:e}),this},e.prototype.empty=function(){return this.routes=[],this},e.prototype.setType=function(t){return this.type=t,this},e.prototype.setPathRoot=function(t){return this.pathRoot=t,this},e.prototype.setPath=function(t){return this.path=t,this},e.prototype.setHash=function(t){return this.hash=t,this},e.prototype.getUrl=function(e){var o;if(void 0===e&&(e=this.type),"path"==e){var h=new RegExp("^"+this.pathRoot+"/?");o=this.path||t.location.pathname.substring(1),o=o.replace(h,"")}else"hash"==e&&(o=this.hash||t.location.hash.substring(1));return o},e.prototype.run=function(){var t,e,h,s,i=this.getUrl();for(t in this.routes)h=this.routes[t],s=o(h.route),e=i.match(s),e&&h.callback.apply(void 0,e.slice(1));return this},e});