/* lightrouter.js - Copyright 2014 Gary Green. Licensed under the Apache License, Version 2.0 */!function(t){"undefined"!=typeof exports?module.exports=t():window.LightRouter=t(window)}(function(t){function e(t){this.pathRoot="",this.routes=[],this.type="path",this.path=null,this.hash=null;var e="([\\w-]+)";if(this.namedParam={replace:new RegExp(":"+e,"g"),match:e},t=t||{},t.type&&this.setType(t.type),t.path&&this.setPath(t.path),t.pathRoot&&this.setPathRoot(t.pathRoot),t.hash&&this.setHash(t.hash),t.routes){var h;for(h in t.routes)this.add(h,t.routes[h])}}return e.prototype={add:function(t,e){return this.routes.push({route:t,callback:e}),this},empty:function(){return this.routes=[],this},setType:function(t){return this.type=t,this},setPathRoot:function(t){return this.pathRoot=t,this},setPath:function(t){return this.path=t,this},setHash:function(t){return this.hash=t,this},regexRoute:function(t){return"string"==typeof t?new RegExp("^"+t.replace(/\//g,"\\/").replace(this.namedParam.replace,this.namedParam.match)+"$"):t},getUrl:function(e){var h;if(void 0===e&&(e=this.type),"path"==e){var s=new RegExp("^"+this.pathRoot+"/?");h=this.path||t.location.pathname.substring(1),h=h.replace(s,"")}else"hash"==e&&(h=this.hash||t.location.hash.substring(1));return decodeURI(h)},run:function(){var t,e,h,s,i=this.getUrl();for(t in this.routes)h=this.routes[t],s=this.regexRoute(h.route),e=i.match(s),e&&h.callback.apply(void 0,e.slice(1));return this}},e});